!function(){var t={70162:function(t){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return{}.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t){try{if(!t)return!1;if("undefined"!=typeof Promise&&t instanceof Promise)return!0;if("undefined"!=typeof window&&"function"==typeof window.Window&&t instanceof window.Window)return!1;if("undefined"!=typeof window&&"function"==typeof window.constructor&&t instanceof window.constructor)return!1;var e={}.toString;if(e){var n=e.call(t);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof t.then)return!0}catch(t){return!1}return!1}n.r(e),n.d(e,"Logger",(function(){return tt})),n.d(e,"LOG_LEVEL",(function(){return q})),n.d(e,"PROTOCOL",(function(){return z})),n.d(e,"canUseSendBeacon",(function(){return J})),n.d(e,"extendIfDefined",(function(){return X})),n.d(e,"isAmplitude",(function(){return K})),n.d(e,"sendBeacon",(function(){return Q})),n.d(e,"getHTTPTransport",(function(){return Z}));var i,a=[],c=[],u=0;function s(){if(!u&&i){var t=i;i=null,t.resolve()}}function l(){u+=1}function d(){u-=1,s()}var f=function(){function t(t){var e=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var n,r,o=!1,i=!1,a=!1;l();try{t((function(t){a?e.resolve(t):(o=!0,n=t)}),(function(t){a?e.reject(t):(i=!0,r=t)}))}catch(t){return d(),void this.reject(t)}d(),a=!0,o?this.resolve(n):i&&this.reject(r)}}var e=t.prototype;return e.resolve=function(t){if(this.resolved||this.rejected)return this;if(o(t))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=t,this.dispatch(),this},e.reject=function(t){var e=this;if(this.resolved||this.rejected)return this;if(o(t))throw new Error("Can not reject promise with another promise");if(!t){var n=t&&"function"==typeof t.toString?t.toString():{}.toString.call(t);t=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=t,this.errorHandled||setTimeout((function(){e.errorHandled||function(t,e){if(-1===a.indexOf(t)){a.push(t),setTimeout((function(){throw t}),1);for(var n=0;n<c.length;n++)c[n](t,e)}}(t,e)}),1),this.dispatch(),this},e.asyncReject=function(t){return this.errorHandled=!0,this.reject(t),this},e.dispatch=function(){var e=this.resolved,n=this.rejected,r=this.handlers;if(!this.dispatching&&(e||n)){this.dispatching=!0,l();for(var i=function(t,e){return t.then((function(t){e.resolve(t)}),(function(t){e.reject(t)}))},a=0;a<r.length;a++){var c=r[a],u=c.onSuccess,s=c.onError,f=c.promise,p=void 0;if(e)try{p=u?u(this.value):this.value}catch(t){f.reject(t);continue}else if(n){if(!s){f.reject(this.error);continue}try{p=s(this.error)}catch(t){f.reject(t);continue}}if(p instanceof t&&(p.resolved||p.rejected)){var h=p;h.resolved?f.resolve(h.value):f.reject(h.error),h.errorHandled=!0}else o(p)?p instanceof t&&(p.resolved||p.rejected)?p.resolved?f.resolve(p.value):f.reject(p.error):i(p,f):f.resolve(p)}r.length=0,this.dispatching=!1,d()}},e.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new t;return this.handlers.push({promise:r,onSuccess:e,onError:n}),this.errorHandled=!0,this.dispatch(),r},e.catch=function(t){return this.then(void 0,t)},e.finally=function(e){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.finally expected a function");return this.then((function(n){return t.try(e).then((function(){return n}))}),(function(n){return t.try(e).then((function(){throw n}))}))},e.timeout=function(t,e){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout((function(){n.resolved||n.rejected||n.reject(e||new Error("Promise timed out after "+t+"ms"))}),t);return this.then((function(t){return clearTimeout(r),t}))},e.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.lazy=function(){return this.errorHandled=!0,this},t.resolve=function(e){return e instanceof t?e:o(e)?new t((function(t,n){return e.then(t,n)})):(new t).resolve(e)},t.reject=function(e){return(new t).reject(e)},t.asyncReject=function(e){return(new t).asyncReject(e)},t.all=function(e){var n=new t,r=e.length,i=[].slice();if(!r)return n.resolve(i),n;for(var a=function(t,e,o){return e.then((function(e){i[t]=e,0==(r-=1)&&n.resolve(i)}),(function(t){o.reject(t)}))},c=0;c<e.length;c++){var u=e[c];if(u instanceof t){if(u.resolved){i[c]=u.value,r-=1;continue}}else if(!o(u)){i[c]=u,r-=1;continue}a(c,t.resolve(u),n)}return 0===r&&n.resolve(i),n},t.hash=function(e){var n={},r=[],i=function(t){if(e.hasOwnProperty(t)){var i=e[t];o(i)?r.push(i.then((function(e){n[t]=e}))):n[t]=i}};for(var a in e)i(a);return t.all(r).then((function(){return n}))},t.map=function(e,n){return t.all(e.map(n))},t.onPossiblyUnhandledException=function(t){return function(t){return c.push(t),{cancel:function(){c.splice(c.indexOf(t),1)}}}(t)},t.try=function(e,n,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var o;l();try{o=e.apply(n,r||[])}catch(e){return d(),t.reject(e)}return d(),t.resolve(o)},t.delay=function(e){return new t((function(t){setTimeout(t,e)}))},t.isPromise=function(e){return!!(e&&e instanceof t)||o(e)},t.flush=function(){return e=i=i||new t,s(),e;var e},t}(),p="Call was rejected by callee.\r\n";function h(t){return void 0===t&&(t=window),t.location.protocol}function m(t){if(void 0===t&&(t=window),t.mockDomain){var e=t.mockDomain.split("//")[0];if(e)return e}return h(t)}function y(t){return void 0===t&&(t=window),"about:"===m(t)}function w(t){try{return!0}catch(t){}return!1}function v(t){void 0===t&&(t=window);var e=t.location;if(!e)throw new Error("Can not read window location");var n=h(t);if(!n)throw new Error("Can not read window protocol");if("file:"===n)return"file://";if("about:"===n){var r=function(t){if(void 0===t&&(t=window),t)try{if(t.parent&&t.parent!==t)return t.parent}catch(t){}}(t);return r&&w()?v(r):"about://"}var o=e.host;if(!o)throw new Error("Can not read window host");return n+"//"+o}function b(t){void 0===t&&(t=window);var e=v(t);return e&&t.mockDomain&&0===t.mockDomain.indexOf("mock:")?t.mockDomain:e}function g(t){if(!function(t){try{if(t===window)return!0}catch(t){}try{var e=Object.getOwnPropertyDescriptor(t,"location");if(e&&!1===e.enumerable)return!1}catch(t){}try{if(y(t)&&w())return!0}catch(t){}try{if(function(t){return void 0===t&&(t=window),"mock:"===m(t)}(t)&&w())return!0}catch(t){}try{if(v(t)===v(window))return!0}catch(t){}return!1}(t))return!1;try{if(t===window)return!0;if(y(t)&&w())return!0;if(b(window)===b(t))return!0}catch(t){}return!1}var _=[],E=[];function j(t,e){void 0===e&&(e=!0);try{if(t===window)return!1}catch(t){return!0}try{if(!t)return!0}catch(t){return!0}try{if(t.closed)return!0}catch(t){return!t||t.message!==p}if(e&&g(t))try{if(t.mockclosed)return!0}catch(t){}try{if(!t.parent||!t.top)return!0}catch(t){}var n=function(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(t){}return-1}(_,t);if(-1!==n){var r=E[n];if(r&&function(t){if(!t.contentWindow)return!0;if(!t.parentNode)return!0;var e=t.ownerDocument;if(e&&e.documentElement&&!e.documentElement.contains(t)){for(var n=t;n.parentNode&&n.parentNode!==n;)n=n.parentNode;if(!n.host||!e.documentElement.contains(n.host))return!0}return!1}(r))return!0}return!1}function S(t){try{if(t===window)return!0}catch(t){if(t&&t.message===p)return!0}try{if("[object Window]"==={}.toString.call(t))return!0}catch(t){if(t&&t.message===p)return!0}try{if(window.Window&&t instanceof window.Window)return!0}catch(t){if(t&&t.message===p)return!0}try{if(t&&t.self===t)return!0}catch(t){if(t&&t.message===p)return!0}try{if(t&&t.parent===t)return!0}catch(t){if(t&&t.message===p)return!0}try{if(t&&t.top===t)return!0}catch(t){if(t&&t.message===p)return!0}try{if(t&&"__unlikely_value__"===t.__cross_domain_utils_window_check__)return!1}catch(t){return!0}try{if("postMessage"in t&&"self"in t&&"location"in t)return!0}catch(t){}return!1}function O(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(t){}return-1}var C,x=function(){function t(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var t=new WeakMap,e={};return Object.freeze(e),t.set(e,"__testvalue__"),"__testvalue__"===t.get(e)}catch(t){return!1}}())try{this.weakmap=new WeakMap}catch(t){}this.keys=[],this.values=[]}var e=t.prototype;return e._cleanupClosedWindows=function(){for(var t=this.weakmap,e=this.keys,n=0;n<e.length;n++){var r=e[n];if(S(r)&&j(r)){if(t)try{t.delete(r)}catch(t){}e.splice(n,1),this.values.splice(n,1),n-=1}}},e.isSafeToReadWrite=function(t){return!S(t)},e.set=function(t,e){if(!t)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(t,e)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var r=this.name,o=t[r];return void(o&&o[0]===t?o[1]=e:Object.defineProperty(t,r,{value:[t,e],writable:!0}))}catch(t){}this._cleanupClosedWindows();var i=this.keys,a=this.values,c=O(i,t);-1===c?(i.push(t),a.push(e)):a[c]=e},e.get=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return e.get(t)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return n&&n[0]===t?n[1]:void 0}catch(t){}this._cleanupClosedWindows();var r=O(this.keys,t);if(-1!==r)return this.values[r]},e.delete=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.delete(t)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];n&&n[0]===t&&(n[0]=n[1]=void 0)}catch(t){}this._cleanupClosedWindows();var r=this.keys,o=O(r,t);-1!==o&&(r.splice(o,1),this.values.splice(o,1))},e.has=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return!0}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return!(!n||n[0]!==t)}catch(t){}return this._cleanupClosedWindows(),-1!==O(this.keys,t)},e.getOrSet=function(t,e){if(this.has(t))return this.get(t);var n=e();return this.set(t,n),n},t}();function I(t){return t.name||t.__name__||t.displayName||"anonymous"}function T(t,e){try{delete t.name,t.name=e}catch(t){}return t.__name__=t.displayName=e,t}function A(){var t="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,(function(){return t.charAt(Math.floor(16*Math.random()))}))+"_"+function(t){if("function"==typeof btoa)return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))}))).replace(/[=]/g,"");if("undefined"!=typeof Buffer)return Buffer.from(t,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function P(){return{}}var k=0,L=0;function R(t,e){void 0===e&&(e={});var n,r,o=e.thisNamespace,i=void 0!==o&&o,a=e.time,c=k;k+=1;var u=function(){for(var e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];var s,l;c<L&&(n=null,r=null,c=k,k+=1),s=i?(r=r||new x).getOrSet(this,P):n=n||{};try{l=function(t){try{return JSON.stringify([].slice.call(t),(function(t,e){return"function"==typeof e?"memoize["+function(t){if(C=C||new x,null==t||"object"!=typeof t&&"function"!=typeof t)throw new Error("Invalid object");var e=C.get(t);return e||(e=typeof t+":"+A(),C.set(t,e)),e}(e)+"]":function(t){var e=!1;try{(t instanceof window.Element||null!==t&&"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument)&&(e=!0)}catch(t){}return e}(e)?{}:e}))}catch(t){throw new Error("Arguments not serializable -- can not be used to memoize")}}(o)}catch(e){return t.apply(this,arguments)}var d=s[l];if(d&&a&&Date.now()-d.time<a&&(delete s[l],d=null),d)return d.value;var f=Date.now(),p=t.apply(this,arguments);return s[l]={time:f,value:p},p};return u.reset=function(){n=null,r=null},T(u,(e.name||I(t))+"::memoized")}function B(){}function M(t,e){void 0===e&&(e=Boolean);var n={};for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)&&(n[r]=t[r]);return n}function N(){return Boolean(document.body)&&"complete"===document.readyState}function D(){return Boolean(document.body)&&"interactive"===document.readyState}function $(){return"undefined"!=typeof window&&void 0!==window.location}R.clear=function(){L=k},R((function(t){if(Object.values)return Object.values(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e})),Error,R((function(){return new f((function(t){if(N()||D())return t();var e=setInterval((function(){if(N()||D())return clearInterval(e),t()}),10)}))}));var H="undefined"!=typeof document?document.currentScript:null,W=R((function(){if(H)return H;if(H=function(){try{var t=function(){try{throw new Error("_")}catch(t){return t.stack||""}}(),e=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(t),n=e&&e[1];if(!n)return;for(var r=0,o=[].slice.call(document.getElementsByTagName("script")).reverse();r<o.length;r++){var i=o[r];if(i.src&&i.src===n)return i}}catch(t){}}())return H;throw new Error("Can not determine current script")})),G=A();R((function(){var t;try{t=W()}catch(t){return G}var e=t.getAttribute("data-uid");if(e&&"string"==typeof e)return e;if((e=t.getAttribute("data-uid-auto"))&&"string"==typeof e)return e;if(t.src){var n=function(t){for(var e="",n=0;n<t.length;n++){var r=t[n].charCodeAt(0)*n;t[n+1]&&(r+=t[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}(JSON.stringify({src:t.src,dataset:t.dataset}));e="uid_"+n.slice(n.length-30)}else e=A();return t.setAttribute("data-uid-auto",e),e}));var U=[],q={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},z={FILE:"file:"},F=[q.WARN,q.ERROR],Y=[q.ERROR,q.WARN,q.INFO,q.DEBUG],V=q.WARN,J=function(t){var e=t.headers,n=t.enableSendBeacon,r=e&&Object.keys(e).length;return!!(window&&window.navigator.sendBeacon&&!r&&n&&window.Blob)},K=function(t){return"https://api2.amplitude.com/2/httpapi"===t},Q=function(t){var e=t.win,n=void 0===e?window:e,r=t.url,o=t.data,i=t.useBlob,a=void 0===i||i;try{var c=JSON.stringify(o);if(!n.navigator.sendBeacon)throw new Error("No sendBeacon available");if(a){var u=new Blob([c],{type:"application/json"});return n.navigator.sendBeacon(r,u)}return n.navigator.sendBeacon(r,c)}catch(t){return!1}},X=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function Z(t){void 0===t&&(t=window);var e=g(t)?function(t){if(!g(t))throw new Error("Expected window to be same domain");return t}(t):window;return function(t){var n=t.url,r=t.method,o=t.headers,i=t.json,a=t.enableSendBeacon,c=void 0!==a&&a;return f.try((function(){var t=!1;return J({headers:o,enableSendBeacon:c})&&(t=K(n)?Q({win:e,url:n,data:i,useBlob:!1}):Q({win:e,url:n,data:i,useBlob:!0})),t||function(t){var e=t.url,n=t.method,r=void 0===n?"get":n,o=t.headers,i=void 0===o?{}:o,a=t.json,c=t.data,u=t.body,s=t.win,l=void 0===s?window:s,d=t.timeout,p=void 0===d?0:d;return new f((function(t,n){if(a&&c||a&&u||c&&a)throw new Error("Only options.json or options.data or options.body should be passed");for(var o={},s=0,d=Object.keys(i);s<d.length;s++){var f=d[s];o[f.toLowerCase()]=i[f]}a?o["content-type"]=o["content-type"]||"application/json":(c||u)&&(o["content-type"]=o["content-type"]||"application/x-www-form-urlencoded; charset=utf-8"),o.accept=o.accept||"application/json";for(var h=0;h<U.length;h++)for(var m=(0,U[h])(),y=0,w=Object.keys(m);y<w.length;y++){var v=w[y];o[v.toLowerCase()]=m[v]}var b=new l.XMLHttpRequest;for(var g in b.addEventListener("load",(function(){var o=function(t){void 0===t&&(t="");for(var e={},n=0,r=t.trim().split("\n");n<r.length;n++){var o=r[n].split(":"),i=o[0],a=o.slice(1);e[i.toLowerCase()]=a.join(":").trim()}return e}(this.getAllResponseHeaders());if(!this.status)return n(new Error("Request to "+r.toLowerCase()+" "+e+" failed: no response status code."));var i=o["content-type"],a=i&&(0===i.indexOf("application/json")||0===i.indexOf("text/json")),c=this.responseText;try{c=JSON.parse(c)}catch(t){if(a)return n(new Error("Invalid json: "+this.responseText+"."))}return t({status:this.status,headers:o,body:c})}),!1),b.addEventListener("error",(function(t){n(new Error("Request to "+r.toLowerCase()+" "+e+" failed: "+t.toString()+"."))}),!1),b.open(r,e,!0),o)o.hasOwnProperty(g)&&b.setRequestHeader(g,o[g]);a?u=JSON.stringify(a):c&&(u=Object.keys(c).map((function(t){return encodeURIComponent(t)+"="+(c?encodeURIComponent(c[t]):"")})).join("&")),b.timeout=p,b.ontimeout=function(){n(new Error("Request to "+r.toLowerCase()+" "+e+" has timed out"))},b.send(u)}))}({win:e,url:n,method:r,headers:o,json:i})})).then(B)}}function tt(t){var e=t.url,n=t.prefix,o=t.logLevel,i=void 0===o?V:o,a=t.transport,c=void 0===a?Z():a,u=t.amplitudeApiKey,s=t.flushInterval,l=void 0===s?6e4:s,d=t.enableSendBeacon,p=void 0!==d&&d,h=[],m=[],y=[],w=[],v=[],b=[];function g(t,e,n){if($()&&window.console&&window.console.log&&!(Y.indexOf(t)>Y.indexOf(i))){var r=[e];r.push(n),(n.error||n.warning)&&r.push("\n\n",n.error||n.warning);try{window.console[t]&&window.console[t].apply?window.console[t].apply(window.console,r):window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,r)}catch(t){}}}function _(){return f.try((function(){if($()&&window.location.protocol!==z.FILE&&(h.length||m.length)){for(var t={},n=0;n<w.length;n++)X(t,(0,w[n])(t));for(var o,i={},a=0;a<b.length;a++)X(i,(0,b[a])(i));return e&&(o=c({method:"POST",url:e,headers:i,json:{events:h,meta:t,tracking:m},enableSendBeacon:p}).catch(B)),u&&c({method:"POST",url:"https://api2.amplitude.com/2/httpapi",headers:{},json:{api_key:u,events:m.map((function(t){return r({event_type:t.transition_name||"event",event_properties:t},t)}))},enableSendBeacon:p}).catch(B),h=[],m=[],f.resolve(o).then(B)}}))}var E,j,S=function(t,e){var n,r;return void 0===e&&(e=50),T((function(){r&&clearTimeout(r);var o=n=n||new f;return r=setTimeout((function(){n=null,r=null,f.try(t).then((function(t){o.resolve(t)}),(function(t){o.reject(t)}))}),e),o}),I(t)+"::promiseDebounced")}(_);function O(t,e,o){if(void 0===o&&(o={}),!$())return x;n&&(e=n+"_"+e);for(var i=r({},M(o,(function(t){return null!=t})),{timestamp:Date.now().toString()}),a=0;a<y.length;a++)X(i,(0,y[a])(i));return function(t,e,n){h.push({level:t,event:e,payload:n}),-1!==F.indexOf(t)&&S()}(t,e,i),g(t,e,i),x}function C(t,e){return t.push(e),x}$()&&(E=S,j=l,function t(){setTimeout((function(){E(),t()}),j)}()),"object"==typeof window&&(window.addEventListener("beforeunload",(function(){_()})),window.addEventListener("unload",(function(){_()})),window.addEventListener("pagehide",(function(){_()})));var x={debug:function(t,e){return O(q.DEBUG,t,e)},info:function(t,e){return O(q.INFO,t,e)},warn:function(t,e){return O(q.WARN,t,e)},error:function(t,e){return O(q.ERROR,t,e)},track:function(t){if(void 0===t&&(t={}),!$())return x;for(var e=M(t,(function(t){return null!=t})),n=0;n<v.length;n++)X(e,(0,v[n])(e));return g(q.DEBUG,"track",e),m.push(e),x},flush:S,immediateFlush:_,addPayloadBuilder:function(t){return C(y,t)},addMetaBuilder:function(t){return C(w,t)},addTrackingBuilder:function(t){return C(v,t)},addHeaderBuilder:function(t){return C(b,t)},setTransport:function(t){return c=t,x},configure:function(t){return t.url&&(e=t.url),t.prefix&&(n=t.prefix),t.logLevel&&(i=t.logLevel),t.transport&&(c=t.transport),t.amplitudeApiKey&&(u=t.amplitudeApiKey),t.flushInterval&&(l=t.flushInterval),t.enableSendBeacon&&(p=t.enableSendBeacon),x}};return x}}])},96711:function(t,e,n){var r=n(29107).Symbol;t.exports=r},97137:function(t,e,n){var r=n(85410),o=n(2382),i=n(62003),a=n(31262),c=n(62615),u=n(89221),s=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),l=!n&&o(t),d=!n&&!l&&a(t),f=!n&&!l&&!d&&u(t),p=n||l||d||f,h=p?r(t.length,String):[],m=h.length;for(var y in t)!e&&!s.call(t,y)||p&&("length"==y||d&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||c(y,m))||h.push(y);return h}},91595:function(t,e,n){var r=n(50951)();t.exports=r},10427:function(t,e,n){var r=n(91595),o=n(65304);t.exports=function(t,e){return t&&r(t,e,o)}},36522:function(t,e,n){var r=n(96711),o=n(10905),i=n(42588),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},99593:function(t,e,n){var r=n(10427);t.exports=function(t,e,n,o){return r(t,(function(t,r,i){e(o,n(t),r,i)})),o}},82744:function(t,e,n){var r=n(36522),o=n(52620);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},45387:function(t,e,n){var r=n(36522),o=n(17164),i=n(52620),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},96794:function(t,e,n){var r=n(26165),o=n(56132),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},85410:function(t){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},22347:function(t){t.exports=function(t){return function(e){return t(e)}}},50951:function(t){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),c=a.length;c--;){var u=a[t?c:++o];if(!1===n(i[u],u,i))break}return e}}},71624:function(t,e,n){var r=n(99593);t.exports=function(t,e){return function(n,o){return r(n,t,e(o),{})}}},62718:function(t,e,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},10905:function(t,e,n){var r=n(96711),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[c]=n:delete t[c]),o}},62615:function(t){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},26165:function(t){var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},56132:function(t,e,n){var r=n(70889)(Object.keys,Object);t.exports=r},18315:function(t,e,n){t=n.nmd(t);var r=n(62718),o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.process,c=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=c},42588:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},70889:function(t){t.exports=function(t,e){return function(n){return t(e(n))}}},29107:function(t,e,n){var r=n(62718),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},27660:function(t){t.exports=function(t){return function(){return t}}},1686:function(t){t.exports=function(t){return t}},31608:function(t,e,n){var r=n(27660),o=n(71624),i=n(1686),a=Object.prototype.toString,c=o((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=a.call(e)),t[e]=n}),r(i));t.exports=c},2382:function(t,e,n){var r=n(82744),o=n(52620),i=Object.prototype,a=i.hasOwnProperty,c=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!c.call(t,"callee")};t.exports=u},62003:function(t){var e=Array.isArray;t.exports=e},86316:function(t,e,n){var r=n(78148),o=n(17164);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},31262:function(t,e,n){t=n.nmd(t);var r=n(29107),o=n(72125),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,c=a&&a.exports===i?r.Buffer:void 0,u=(c?c.isBuffer:void 0)||o;t.exports=u},78148:function(t,e,n){var r=n(36522),o=n(95603);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},17164:function(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},95603:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},52620:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},89221:function(t,e,n){var r=n(45387),o=n(22347),i=n(18315),a=i&&i.isTypedArray,c=a?o(a):r;t.exports=c},65304:function(t,e,n){var r=n(97137),o=n(96794),i=n(86316);t.exports=function(t){return i(t)?r(t):o(t)}},72125:function(t){t.exports=function(){return!1}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){"use strict";var t=n(70162);let e;const r=t=>{if(!t)return"";let e="";try{e="string"!=typeof t?JSON.stringify(t):t}catch{console.error("getPayloadStringError Issue generating payload string")}return e},o=(n,o)=>{(e||(e=(0,t.Logger)({url:"/ncp/api/log",prefix:"",flushInterval:1e4,logLevel:"info"}),e.addMetaBuilder((function(){return{currPathname:window?.location?.pathname||""}})),e)).error(n,{payload:r(o)})};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c=(t,...e)=>String.raw(t,...e),u=c,s=c;class l extends HTMLElement{constructor(){super(),a(this,"state",void 0),a(this,"isHostSlotCreated",void 0),a(this,"isInitialRenderCompleted",void 0),this.state={},this.isHostSlotCreated=!1,this.isInitialRenderCompleted=!1}connectedCallback(){this.attachShadow({mode:"open"}),this.render()}set data(t){this.state={...this.state,...t},this.render()}get data(){return this.state}render(){if(this.isInitialRenderCompleted)this.rerender?.();else{const t=this.renderHtmlInHost();this.renderHtmlScriptInHost(),this.attachEventListener("click",this.onClick()),this.isInitialRenderCompleted=t,t&&this.rerender?.()}}attachEventListener(t,e){const n=this.getButtonEl();e&&n&&n.addEventListener(t,e)}createHostSlot(){this.isHostSlotCreated||(this.getShadowRoot().innerHTML+=s`<slot></slot>`,this.isHostSlotCreated=!0)}renderHtmlInHost(){const t=this.initialRenderHost?.();return!!t&&(this.createHostSlot(),this.getShadowRoot().host.innerHTML+=t,!0)}renderHtmlScriptInHost(){const t=this.initialRenderHostScript?.();if(!t)return;this.createHostSlot(),this.getShadowRoot().host.innerHTML+=t;const e=document.createElement("script"),n=this.getShadowRoot().host.querySelector("script");var r;e.innerHTML=(r=n,r?.innerHTML??""),n?.parentNode?.replaceChild(e,n)}getShadowRoot(){return this.shadowRoot}getButtonEl(){return this.getShadowRoot().host.querySelector(`#${this.buttonId()}`)}getIsInitialized(){return this.isInitialRenderCompleted}}a(l,"styles",u``);var d=l;const f="paypal-add-to-cart-button";var p=function(t){return t.QuantityExceeded="quantity-exceeded-error",t.CurrencyMismatch="currency-mismatch-error",t.CartFull="cart-full-error",t.Generic="cart-generic-error",t}(p||{});const h="paypal-cart-button";const m="__paypal_hosted_cart__";let y=function(t){return t.Recommended="recommended",t.White="white",t.Black="black",t.Custom="custom",t}({}),w=function(t){return t.Large="large",t.Medium="medium",t.Small="small",t}({}),v=function(t){return t.Venmo="venmo",t.PayLater="paylater",t.ApplePay="applepay",t.Card="card",t}({}),b=function(t){return t.VENMO="venmo",t.PAYLATER="payLater",t.APPLEPAY="applePay",t.GOOGLEPAY="googlePay",t}({}),g=function(t){return t.Vertical="vertical",t.Horizontal="horizontal",t}({}),_=function(t){return t.Rect="rect",t.Pill="pill",t}({}),E=function(t){return t.Large="large",t.Medium="medium",t.Small="small",t}({}),j=function(t){return t.Gold="gold",t.Black="black",t.White="white",t.Blue="blue",t.Silver="silver",t.Custom="custom",t}({}),S=function(t){return t.PayPalRecommended="paypalRecommended",t.PayLater="payLater",t.Venmo="venmo",t.None="none",t}({}),O=function(t){return t.Checkout="checkout",t.Proceed="proceed",t.Pay="pay",t.Custom="custom",t}({});const C=Object.freeze({payment_method_paylater:!0,payment_method_venmo:!0,payment_method_apple_pay:!0,show_business_name:!1,show_business_logo:!1,homepage_url:""}),x=Object.freeze({stacked_button_layout:g.Vertical,stacked_button_shape:_.Rect,stacked_button_size:E.Medium,stacked_button_color_type:j.Gold,stacked_button_second_button_type:S.PayPalRecommended,stacked_button_text_type:O.Checkout,stacked_button_custom_text:""}),I=Object.freeze({single_button_color_type:j.Gold,single_button_shape:_.Rect,single_button_size:E.Medium,single_button_color_code:"FFD140"});Object.freeze({cart_button_shape:_.Rect,cart_button_size:E.Medium,cart_button_color_type:j.Gold,cart_button_color_code:"FFD140"});Object.freeze({...C,...x,...I});const T={payment:"main:business:web:hostedcheckout:payment",order_status:"main:business:web:hostedcheckout:order_status",not_found:"main:business:web:hostedcheckout:not_found",merchant_website:"main:business:web:hostedcheckout:merchant_website"},A="www.paypalobjects.com",P=(t,e)=>t&&"string"==typeof t&&t.includes(A)&&e?t.replace(A,e):t;var k={};let L=function(t){return t.ADD_TO_CART="addToCart",t.PAYMENT_LINK="paymentLink",t.QR_CODE="qrCode",t.STACKED_BUTTONS="stackedButtons",t.SINGLE_BUTTON="singleButton",t}({});P("https://www.paypalobjects.com/paypal-ui/pictograms/multicolored/svg/cards.svg",k?.geoAwareDomain),L.PAYMENT_LINK,P("https://www.paypalobjects.com/paypal-ui/pictograms/multicolored/svg/fun.svg",k?.geoAwareDomain),L.QR_CODE,P("https://www.paypalobjects.com/paypal-ui/pictograms/multicolored/svg/qrc-pay.svg",k?.geoAwareDomain),L.STACKED_BUTTONS,L.SINGLE_BUTTON,L.ADD_TO_CART,b.PAYLATER,P("https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-mark-color.svg",k?.geoAwareDomain),b.VENMO,P("https://www.paypalobjects.com/paypal-ui/logos/svg/venmo-mark-color.svg",k?.geoAwareDomain),b.APPLEPAY,P("https://www.paypalobjects.com/paypal-ui/logos/svg/apple-pay-color.svg",k?.geoAwareDomain),b.GOOGLEPAY,P("https://www.paypalobjects.com/paypal-ui/logos/svg/google-pay-color.svg",k?.geoAwareDomain);b.PAYLATER,b.PAYLATER,b.VENMO,b.VENMO,b.APPLEPAY,b.APPLEPAY,b.GOOGLEPAY,b.GOOGLEPAY,v.Venmo,b.VENMO,v.PayLater,b.PAYLATER,v.ApplePay,b.APPLEPAY,y.Recommended,y.Black,y.White,P("https://www.paypalobjects.com/images/Debit_Credit_APM.svg",k?.geoAwareDomain),P("https://www.paypalobjects.com/images/Debit_Credit.svg",k?.geoAwareDomain),w.Large,w.Medium,w.Small,v.Venmo,v.PayLater;var R=n(31608);const B=(n.n(R)()({currencyCode:"currency_code",itemName:"item_name",shipping:"shipping",taxRate:"tax_rate",memoLabel:"memo_label",layout:"layout",shape:"shape",color:"color",paypalButtonText:"button_text",tagline:"tagline",amount:"amount",quantityOption:"quantity_option",amountLabel:"amount_label",invoiceLabel:"invoice_label",returnUrlType:"return_url_type",customReturnUrl:"custom_return_url",checkoutButtonTextType:"checkout_button_text_type",checkoutButtonCustomText:"checkout_button_custom_text",singleButtonColorType:"single_button_color_type",singleButtonColor:"single_button_color",singleButtonTextType:"single_button_text_type",singleButtonCustomText:"single_button_custom_text",singleButtonSize:"single_button_size",paymentButtonType:"payment_button_type",productId:"product_id",checkoutButtonType:"checkout_button_type",size:"size",isNotCollectShippingAddress:"no_shipping",shippingPreference:"shipping_preference",taxRatePreference:"tax_rate_preference",cartButtonShape:"cart_button_shape",cartButtonSize:"cart_button_size",cartButtonColorType:"cart_button_color_type",cartButtonColorCode:"cart_button_color_code"}),{product:"quantum_leap",component:"nocodenodeweb",pgrp:"main:business:web:hostedcheckout",space_key:"SKS09G"}),M=(t,e,n)=>{const r=T[t||""];return n?{...B,page:r,event_name:e,e:n,event_type:n}:{...B,page:r,action:e}},N=(t=3)=>{const e=new Date;return new Date(e.setDate(e.getDate()+t)).getTime().toString()};let D="";const $=t=>{const e=document.querySelectorAll(h);if(!e.length)throw new Error(`Cannot find <${h} />`);e.forEach((e=>{e.data={count:t}}))};let H=function(t){return t.CheckLocalStorage="CHECK_LOCAL_STORAGE",t.GetItem="GET_ITEM",t.SetItem="SET_ITEM",t}({});const W=document.currentScript?.getAttribute("src"),G=t=>"error"in t,U=()=>{try{const t=window.localStorage?.getItem?.("__paypal_cart_api_url_debug__");if(t)return t}catch(t){console.warn("Invalid debug url")}if(!W)throw Error("Missing src");const{hostname:t,protocol:e,host:n,pathname:r}=new URL(W);return r.includes("/js/embedded/")?`${e}//${n}`:t.includes("paypalobjects.com")&&r.includes("/sb/")?"https://www.sandbox.paypal.com":"https://www.paypal.com"},q=async(t,e)=>{const n=document.getElementById(D).contentWindow;if(!n)throw new Error("Iframe not found");return function(t,e,n="*",r=1e4){const o=new Promise(((r,o)=>{const i=new MessageChannel;i.port1.onmessage=({data:t})=>{i.port1.close();const e=t;e instanceof Error?o(e):r(e)},i.port1.onmessageerror=({data:t})=>{i.port1.close(),o(t)},t.postMessage(e,n,[i.port2])})),i=new Promise(((t,e)=>{const n=Math.max(r,0);setTimeout((()=>e(new Error(`Timeout: Unable to get response within ${n}ms`))),n)}));return Promise.race([o,i])}(n,{action:t,payload:e},U())},z=async()=>{const t=await q(H.GetItem,{key:m});let e;try{e=JSON.parse(t)}catch(t){console.warn("Error parsing data")}return e&&e.buyer_id&&(t=>{if(!t)return!1;const e=parseInt(t,10);return!Number.isNaN(e)&&Date.now()<e})(e.expiry)?e.buyer_id:null},F=async t=>{if(!t)return;const e={buyer_id:t,expiry:N()};await q(H.SetItem,{key:m,value:JSON.stringify(e)})};let Y=!1;const V=()=>Y,J=(t,e,n={})=>{const r=V()?"third-party":"redirection";fetch(`${U()}/ncp/api/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tracking:[{...M("merchant_website",t,e),...n,flow_type:r}]})})};customElements.define(f,class extends d{buttonId(){return`add-to-cart-btn_${this.state.hostedButtonId}`}initialRenderHost(){const{html:t}=this.state;return t||null}initialRenderHostScript(){const{htmlScript:t}=this.state;return t||null}rerender(){const{buttonState:t,issue:e}=this.state,n=this.getButtonEl();if(!n)return;let r="add";if(n.classList.remove("disabled"),n.removeAttribute("disabled"),"LOADING"===t?(n.classList.add("disabled"),n.disabled=!0,r="adding"):"COMPLETED"===t?(n.classList.add("disabled"),n.disabled=!0,r="added"):n.focus(),["add","adding","added"].forEach((t=>{n.querySelector(`#btn-text_${t}`)?.classList.add("hidden")})),n.querySelector(`#btn-text_${r}`)?.classList.remove("hidden"),e){const t={CART_ITEM_QUANTITY_OUT_OF_RANGE:p.QuantityExceeded,CART_ITEM_CURRENCY_CODE_MISMATCH:p.CurrencyMismatch,CART_ITEM_MAX_LIMIT_EXCEEDED:p.CartFull}[e]||p.Generic,n=this.shadowRoot?.host.querySelector(`#${t}`);n&&(n.style.display="block")}}onClick(){const{hostedButtonId:t,onAddToCart:e}=this.state;if(!t||!e)return null;let n=!1;const r={enable:()=>{n=!0},disable:()=>{n=!1}},{onInit:o,onClick:i}=window[`__pp_form_fields_${t}`];return o({},r),r=>{i(),n?e({hostedButtonId:t,userInputs:this.getUserInputsByElements()}):console.warn("Invalid form")}}getUserInputsByElements(){const t=this.shadowRoot?.host.querySelectorAll("input,select"),e={};return t?.forEach((t=>{const n=t.getAttribute("name");n&&(e[n]=t.value)})),e}hideErrors(){[p.Generic,p.QuantityExceeded,p.CurrencyMismatch,p.CartFull].forEach((t=>{const e=this.shadowRoot?.host.querySelector(`#${t}`);e&&(e.style.display="none")}))}}),customElements.define(h,class extends d{buttonId(){return"cart-btn"}initialRenderHost(){const{html:t}=this.state;return t||null}initialRenderHostScript(){const{htmlScript:t}=this.state;return t||null}isValidCount(t){if("string"!=typeof t&&"number"!=typeof t)return!1;const e=Number(t);return!Number.isNaN(e)&&Number.isInteger(e)&&e>=0}rerender(){const{count:t}=this.state,e=this.getButtonEl()?.querySelector(`#${this.buttonId()}_count`);if(e)if(this.isValidCount(t)){e.classList.remove("hidden"),e.innerHTML=`(${t})`;const n=this.getButtonEl()?.querySelector(`#${this.buttonId()}_count_reader`);if(n){const e=document.querySelector(`#${this.buttonId()}`)?.getAttribute("aria-label")||"";n.innerHTML=`${e} ${t}`}}else e.classList.add("hidden"),e.innerHTML=""}onClick(){return this.state.onClick}});const K=document.currentScript?.getAttribute("data-merchant-id"),Q=async()=>{n.g.cartPaypal._isCartCountLoading=!0;const{cart_id:t,count:e}=await(async t=>{if(new URL(window.location.toString()).searchParams.get("__paypal_fallback_debug__"))return null;try{const e=await q(H.CheckLocalStorage);if(Y=!!e,Y){if(!t)throw Error('init: "data-merchant-id" is missing');const{cart_id:e,count:n}=await(async({merchantId:t})=>{const e=await z();if(!e)return{count:0};const n=await fetch(`${U()}/ncp/api/cart-count`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({merchant_id:t,buyer_id:e})});if(!n.ok)throw Error(`/api/cart-count failed with status ${n.status}`);const r=await n.json();return F(r.buyer_id),r})({merchantId:t});if($(n),e)return{count:n,cart_id:e}}return null}catch(t){o(t.message)}return null})(K)??{};n.g.cartPaypal._isCartCountLoading=!1,t&&(n.g.cartPaypal._cartId=t);const r={merchant_id:K,cart_id:t,merchant_url:window.location.href,total_items:e};J("view_cart_button_shown","im",r)},X=()=>{const t=document.createElement("iframe");t.setAttribute("style","display: none"),t.src=`${U()}/ncp/embed/cart`,t.id=(()=>{if(D)return D;const t=Date.now().toString(36)+Math.random().toString(36).substring(30);return D=`${t}-iframe`,D})(),document.body.appendChild(t),t.addEventListener("load",Q)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",X):X(),n.g.cartPaypal={_cartId:void 0,_isCartCountLoading:!1,AddToCart:async t=>{try{if("object"!=typeof t)throw Error("Invalid data");const{id:e}=t;if(!e)throw Error('"id" is missing');if(!K)throw Error('"data-merchant-id" is missing');const r=document.querySelector(`${f}[data-id="${e}"]`);if(!r)throw Error(`Cannot find <${f} /> with ${e}`);const i=await(async({hostedButtonId:t,merchantId:e})=>{try{const n=await fetch(`${U()}/ncp/api/cart/form-fields/${e}/${t}`),r=await n.json();if(200===n.status||r.html)return{html:r.html,html_script:r.html_script};throw Error("fetch add to cart form-fields error")}catch(t){return null}})({hostedButtonId:e,merchantId:K});if(!i)throw Error("Invalid add to cart form fields");const a={merchant_id:K,cart_id:n.g.cartPaypal._cartId,button_id:e,merchant_url:window.location.href};J("add_to_cart_button_shown","im",a);const{html:c,html_script:u}=i;r.data={hostedButtonId:e,html:c,htmlScript:u,buttonState:"IDLE",issue:null,onAddToCart:async({hostedButtonId:t,userInputs:e})=>{try{if(V()){const o=await z();J("add_to_cart_clicked_clientside","cl",{...a,buyer_id:o}),r.hideErrors(),r.data={buttonState:"LOADING",issue:null};const i=await(async({merchantId:t,userInputs:e,hostedButtonId:n})=>{const r=await z(),o=await fetch(`${U()}/ncp/api/add-to-cart/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({merchant_id:t,user_inputs:e,buyer_id:r})});if(200!==o.status&&422!==o.status)throw Error(`/api/cart failed with status ${o.status}`);const i=await o.json();return G(i)||F(i.buyer_id),i})({merchantId:K,userInputs:e,hostedButtonId:t});if(G(i))throw Error(i.details?.[0]?.issue);n.g.cartPaypal._cartId=i.cart_id,r.data={buttonState:"COMPLETED"},setTimeout((()=>{r.data={buttonState:"IDLE"}}),5e3),$(i.count)}else J("add_to_cart_clicked_clientside","cl",{...a}),(async({merchantId:t,userInputs:e,hostedButtonId:n})=>{((t,e)=>{const n=document.createElement("form");document.body.appendChild(n),n.target="_top",n.method="post",n.action=t,Object.keys(e).forEach((t=>{const r=document.createElement("input");r.type="hidden",r.name=t,r.value=e[t],n.appendChild(r)})),n.submit(),document.body.removeChild(n)})(`${U()}/ncp/viewcart/merchant/${t}`,{...e,hosted_button_id:n})})({merchantId:K,userInputs:e,hostedButtonId:t})}catch(t){o(t.message),r.data={buttonState:"IDLE",issue:t.message}}}}}catch(t){o(t.message)}},Cart:async t=>{try{if("object"!=typeof t)throw Error("Invalid data");const{id:e}=t;if(!e)throw Error('"id" is missing');if(!K)throw Error('"data-merchant-id" is missing');const r=await(async({merchantId:t})=>{try{const e=await fetch(`${U()}/ncp/api/cart/form-fields/view-cart/${t}`),n=await e.json();if(200===e.status||n.html)return{html:n.html,html_script:n.html_script};throw Error("fetch view cart form-fields error")}catch(t){return null}})({merchantId:K});if(!r)throw Error("Invalid view cart form fields");const{html:o,html_script:i}=r,a=document.querySelectorAll(`${h}[data-id="${e}"]`);if(0===a.length)throw Error(`Cannot find <${h} /> with ${e}`);const c=()=>{const t={merchant_id:K,cart_id:n.g.cartPaypal._cartId,merchant_url:window.location.href};J("view_cart_button_clicked","cl",{...t,total_items:a[0].data?.count??0});let e="";n.g.cartPaypal._isCartCountLoading||(e=V()?n.g.cartPaypal._cartId?`${U()}/ncp/viewcart/${n.g.cartPaypal._cartId}`:`${U()}/ncp/viewcart/merchant/${K}?empty=true`:`${U()}/ncp/viewcart/merchant/${K}`,window.location.href=e)};for(const t of a)t.getIsInitialized()||(t.data={html:o,htmlScript:i,onClick:c})}catch(t){o(t.message)}}}}()}();
//# sourceMappingURL=cart.js.map